var browser,chrome,e={fedifollow_homeinstance:null,fedifollow_alert:!1,fedifollow_mode:"blacklist",fedifollow_whitelist:null,fedifollow_blacklist:null,fedifollow_target:"_self",fedifollow_autoaction:!0,fedifollow_showfollows:!0,fedifollow_redirects:!0,fedifollow_enabledelay:!0};function o(e){console.error("[FediFollow] Error: "+e)}function l(e){function l(){e.fedifollow_homeinstance=$("input#homeinstance").val().trim(),e.fedifollow_alert=$("input#alert").is(":checked"),e.fedifollow_mode=$("select#mode").val(),e.fedifollow_whitelist=$("textarea#whitelist_content").val(),e.fedifollow_blacklist=$("textarea#blacklist_content").val(),e.fedifollow_target=$("select#target").val(),e.fedifollow_autoaction=$("input#autoaction").is(":checked"),e.fedifollow_showfollows=$("input#showfollows").is(":checked"),e.fedifollow_redirects=$("input#redirects").is(":checked"),e.fedifollow_enabledelay=$("input#delay").is(":checked"),(browser||chrome).storage.local.set(e).then(($("span#indicator").show(),void setTimeout(function(){$("span#indicator").hide()},1500)),o)}$(document).ready(async function(){$("input#homeinstance").val(e.fedifollow_homeinstance),$("textarea#blacklist_content").val(e.fedifollow_blacklist),$("textarea#whitelist_content").val(e.fedifollow_whitelist),$("select#mode").val(e.fedifollow_mode),$("select#target").val(e.fedifollow_target),$("input#alert").prop("checked",e.fedifollow_alert),$("input#autoaction").prop("checked",e.fedifollow_autoaction),$("input#showfollows").prop("checked",e.fedifollow_showfollows),$("input#redirects").prop("checked",e.fedifollow_redirects),$("input#delay").prop("checked",e.fedifollow_enabledelay),("whitelist"==$("select#mode").val()?$("div#whitelist_input"):$("div#blacklist_input")).show(),$("select#mode").change(function(){("whitelist"==$("select#mode").val()?($("div#blacklist_input").hide(),$("div#whitelist_input")):($("div#whitelist_input").hide(),$("div#blacklist_input"))).show()}),$("form#fedifollow-settings").on("submit",function(e){e.preventDefault(),l(),chrome.runtime.sendMessage({updatedsettings:!0})})})}(browser||chrome).storage.local.get(e).then(l,o);